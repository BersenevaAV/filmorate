# Filmorate
—Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ñ–∏–ª—å–º–æ–≤.

### &#128736; –°—Ç–µ–∫:
![Java](https://img.shields.io/badge/java-%25?style=for-the-badge&logo=java&color=blue)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-%252300758F.svg?style=for-the-badge&logo=PostgreSQL&color=lightskyblue)
![Spring](https://img.shields.io/badge/spring-%25?style=for-the-badge&logo=spring&color=lavenderblush)
![Jdbc](https://img.shields.io/badge/Jdbc-%25?style=for-the-badge&color=lavender)
![REST API](https://img.shields.io/badge/REST%20API-%23266999.svg?style=for-the-badge&color=teal)
![JUnit](https://img.shields.io/badge/JUnit-%25?style=for-the-badge&color=crimson)
![Git](https://img.shields.io/badge/Git-%25.svg?style=for-the-badge&logo=git&color=black)

### ‚úî –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
 - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π;
 - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π;
 - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤;
 - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Ñ–∏–ª—å–º–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏;

–í –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∞:
- –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–≤–æ–¥–∏—Ç—å —Ç–æ–ø-N —Ñ–∏–ª—å–º–æ–≤ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–∞–π–∫–æ–≤;
- –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏—Å—Å–µ—Ä–∞ —Ñ–∏–ª—å–º–∞;

### üñ•Ô∏è –ó–∞–ø—É—Å–∫:
1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```sh
      https://github.com/BersenevaAV/filmorate.git
   ```
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ IntelliJ IDEA;
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ;

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

![Screenshot of a comment on a GitHub issue showing an image, added in the Markdown, of an Octocat smiling and raising a tentacle.](./schema.png)

### `mpa_rating`

–°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–π—Ç–∏–Ω–≥–∞—Ö Motion Picture Association.

–¢–∞–±–ª–∏—Ü–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–æ–ª–µ–π:

- `rating_id` ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–µ–π—Ç–∏–Ω–≥–∞;
- `name` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞;

### `film`

–°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∏–ª—å–º–∞—Ö.

–¢–∞–±–ª–∏—Ü–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–æ–ª–µ–π:

- –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á `film_id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å–º–∞;
- `title` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞;
- `description` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞;
- `release_date` ‚Äî –¥–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞;
- `duration` ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö;
- `rating_id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–µ–π—Ç–∏–Ω–≥–∞ –∏–∑ mpa_rating;

### `genre`

–°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∂–∞–Ω—Ä–∞—Ö —Ñ–∏–ª—å–º–æ–≤.

–¢–∞–±–ª–∏—Ü–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–æ–ª–µ–π:

- –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á `genre_id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∂–∞–Ω—Ä–∞;
- `name` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∂–∞–Ω—Ä–∞;

### `film_genre`

–°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∂–∞–Ω—Ä–∞—Ö —Ñ–∏–ª—å–º–æ–≤ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã film.

–¢–∞–±–ª–∏—Ü–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–æ–ª–µ–π:

- `film_id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å–º–∞ –∏–∑ film;
- `genre_id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∂–∞–Ω—Ä–∞ –∏–∑ genre;

–í —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü–µ —Å–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –ø–æ –ø–æ–ª—è–º film_id –∏ genre_id

### `film_likes`

–°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ª–∞–π–∫–∞—Ö –∫ —Ñ–∏–ª—å–º–∞–º –∏–∑ —Ç–∞–±–ª–∏—Ü—ã film.

–¢–∞–±–ª–∏—Ü–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–æ–ª–µ–π:

- `film_id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å–º–∞ –∏–∑ film;
- `user_id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ user;

–í —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü–µ —Å–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –ø–æ –ø–æ–ª—è–º film_id –∏ user_id

### `user`

–°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö.

–¢–∞–±–ª–∏—Ü–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–æ–ª–µ–π:

- –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á `user_id` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;
- `email` ‚Äî email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è [—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–µ –Ω—É–ª–µ–≤–æ–µ –ø–æ–ª–µ];
- `login` ‚Äî login –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è [—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–µ –Ω—É–ª–µ–≤–æ–µ –ø–æ–ª–µ];
- `name` ‚Äî –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;
- `birthday` ‚Äî –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è;

### `users_friendship`

–°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥—Ä—É–∑—å—è—Ö.

–¢–∞–±–ª–∏—Ü–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–æ–ª–µ–π:

- `initiator_id` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–∏–ª –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –¥—Ä—É–∑—å—è;
- `friend_id` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∑–∞–ø—Ä–æ—Å –≤ –¥—Ä—É–∑—å—è;
- `status` ‚Äî —Å—Ç–∞—Ç—É—Å –∑–∞–ø—Ä–æ—Å–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä (`PENDING`, `APPROVED`)

–í —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü–µ —Å–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –ø–æ –ø–æ–ª—è–º initiator_id –∏ friend_id

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–¥

–ó–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å id = 1:

```sql
SELECT u.user_id,
       u.name,
       u.email,
       u.login
FROM (SELECT initiator_id AS user_id
      FROM users_friendship
      WHERE initiator_id = 1 OR friend_id = 1 AND status = 'APPROVED'

      UNION

      SELECT friend_id AS user_id
      FROM users_friendship
      WHERE initiator_id = 1 OR friend_id = 1 AND status = 'APPROVED') AS users_list
LEFT JOIN "user" AS u ON u.user_id = users_list.user_id
WHERE users_list.user_id != 1;
```

–ó–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ª–∞–π–∫–Ω—É–≤—à–∏—Ö —Ñ–∏–ª—å–º —Å id = 1:

```sql
SELECT u.user_id,
       u.name,
       u.email
FROM film AS f
LEFT JOIN film_likes AS fl on f.film_id = fl.film_id
LEFT JOIN "user" AS u on u.user_id = fl.user_id
WHERE f.film_id = 1;
```
